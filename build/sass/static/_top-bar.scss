.top-bar {

    .nav-menu {

        text-align: center;

        > .dropdown.menu {
            display: inline-table;
            vertical-align: middle;
            text-align: left;

            > .current-menu-item, > .current-menu-ancestor {

                background-color: lighten( $topbar-background, 25% );

                > a {
                    @include light-or-dark-text( lighten( $topbar-background, 25% ) );
                }

                &.is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        @if lightness( lighten( $topbar-background, 25% ) ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                }

                &.is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        @if lightness( lighten( $topbar-background, 25% ) ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                }

            }

            .is-dropdown-submenu-parent.is-right-arrow {

                // Top Level
                > a:after {
                    border-left-color: $topbar-link-color;
                }

                // Top Level:hover
                &:hover > a:after {

                    @if lightness( darken( $topbar-background, 10% ) ) < 50% {

                        border-left-color: $light-color;

                    }
                    @else {

                        border-left-color: $dark-color;

                    }

                }

            }
            .is-dropdown-submenu-parent.is-down-arrow {

                > a:after {
                    border-top-color: $topbar-link-color;
                }

                &:hover > a:after {

                    @if lightness( darken( $topbar-background, 10% ) ) < 50% {

                        border-top-color: $light-color;

                    }
                    @else {

                        border-top-color: $dark-color;

                    }

                }

            }

        }

        > .menu {

            // Top Level
            > li:hover {
                background-color: lighten( $topbar-background, 10% ) !important;

                > a {
                    @include light-or-dark-text( lighten( $topbar-background, 10% ) );
                }

            }

            // Everything below
            > li {

                li {
                    a {
                        @include light-or-dark-text( $dropdownmenu-background );
                    }
                }

                li:hover {
                    background-color: $light-gray !important;

                    > a {
                        @include light-or-dark-text( $light-gray );
                    }

                }

                .is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        @if lightness( $dropdownmenu-background ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                    // Sub-level with submenu:hover
                    &:hover > a:after {

                        @if lightness( $light-gray ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                }
                .is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        @if lightness( $dropdownmenu-background ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                    &:hover > a:after {

                        @if lightness( $light-gray ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                }

            }

            li.current-menu-item, li.current-menu-ancestor {

                background-color: darken( $light-gray, 10% );

                > a {
                    @include light-or-dark-text( darken( $light-gray, 10% ) );
                }
                
                &.is-dropdown-submenu-parent.is-right-arrow {

                    > a:after {

                        @if lightness( darken( $light-gray, 10% ) ) < 50% {

                            border-left-color: $light-color !important;

                        }
                        @else {

                            border-left-color: $dark-color !important;

                        }

                    }

                }
                
                &.is-dropdown-submenu-parent.is-down-arrow {

                    > a:after {

                        @if lightness( darken( $light-gray, 10% ) ) < 50% {

                            border-top-color: $light-color !important;

                        }
                        @else {

                            border-top-color: $dark-color !important;

                        }

                    }

                }

            }

        }

    }

}

